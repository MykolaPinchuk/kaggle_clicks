# Agent Log — Iteration Cleanup / Handoff

- Agent: Codex CLI
- Model: GPT-5.2
- Created (UTC): 2025-12-21T22:29:37+00:00

## What was achieved

- Implemented TE caching to avoid recomputing TE across sweeps:
  - Added `kaggle_clicks/precompute_te.py`
  - Added `--te-parquet` support in `kaggle_clicks/run_baseline_te.py`
  - Passed `--te-parquet` through:
    - `kaggle_clicks/run_sweep_family_a.py`
    - `kaggle_clicks/run_sweep_family_a_full_grid.py`
- Added unattended sweep safety:
  - RAM-aware throttling in `kaggle_clicks/run_sweep_family_a_full_grid.py`:
    - `--ram-budget-gib`, `--min-mem-available-gib`, `--min-swap-free-gib`, `--mem-safety-margin-gib`
- Reduced per-run RAM in time aggregation:
  - `kaggle_clicks/time_agg.py` refactor to avoid per-window deques; compact per-entity history storage.

## Final sweep outcome (10% paper grid)

- Completed 20×2 (40 runs) full grid on 10% sample with TE cache + RAM throttling:
  - `runs/sweeps/20251221_183006_paper_full_grid_10pct_s10pct_tecache/summary.md`
  - `runs/sweeps/20251221_183006_paper_full_grid_10pct_s10pct_tecache/summary.csv`
- TE cache used:
  - `data/interim/te_cache/train_sample_10pct_te_m100.parquet`

## Docs updated

- `docs/AGENT_ONBOARDING.md` (TE cache workflow + memory throttle flags)
- `docs/FAMILY_A_RESULTS.md` (added pointer to the completed 10% full-grid sweep)
- `docs/plan_for_working_paper_results.md` (added TE cache note)

## What the next agent should do

- Postprocess inference vs a baseline (typically `A3_trailing`) for Fold A/B test sets:
  - `python -m kaggle_clicks.postprocess_sweep_inference --sweep-dir runs/sweeps/20251221_183006_paper_full_grid_10pct_s10pct_tecache --baseline-run-id A3_trailing --split test --bootstrap-reps 200 --seed 42`
- Produce paper tables (means/std across folds, plus inference CIs) from:
  - `runs/sweeps/20251221_183006_paper_full_grid_10pct_s10pct_tecache/summary.csv`

