# Agent Log — Full Grid Smoke + 0.1% Support

- Agent: Codex CLI
- Model: GPT-5.2
- Created (UTC): 2025-12-20T21:22:00+00:00

## What changed

- Added deterministic fractional sampling helper in `kaggle_clicks/sampling.py`.
- Added `--sample-frac` support in `kaggle_clicks/run_baseline_te.py` and report display.
- Added full-grid sweep runner `kaggle_clicks/run_sweep_family_a_full_grid.py` with resume/skip logic and 20-spec grid (4 length sets × 5 shapes).

## Data artifacts created

- `data/interim/train_sample_0p1pct.parquet` (40,439 rows), built by filtering the existing 10% sample using deterministic hash.

## Runs executed

1) Create 0.1% sample from 10% sample:
   - Python snippet (hash-based filter) → `data/interim/train_sample_0p1pct.parquet`.

2) Full-grid smoke sweep (0.1%, Fold A/B, export preds):
   - Command:
     - `python -m kaggle_clicks.run_sweep_family_a_full_grid --sample-pct 1 --sample-frac 0.001 --sample-parquet data/interim/train_sample_0p1pct.parquet --sweep-tag full_grid_smoke_0p1pct --rolling-tail --export-preds --n-estimators 150 --learning-rate 0.15 --max-wall-seconds 280`
   - Output sweep dir:
     - `runs/sweeps/20251220_211829_full_grid_smoke_0p1pct_s0p1pct/summary.md`

3) Smoke inference vs baseline (A3_trailing, test split, 50 bootstraps):
   - Command:
     - `python -m kaggle_clicks.postprocess_sweep_inference --sweep-dir runs/sweeps/20251220_211829_full_grid_smoke_0p1pct_s0p1pct --baseline-run-id A3_trailing --split test --bootstrap-reps 50 --seed 42`
   - Output:
     - `runs/sweeps/20251220_211829_full_grid_smoke_0p1pct_s0p1pct/inference_vs_baseline.csv`

## Notes

- Smoke results are sanity-only (reduced estimators, 0.1% sample).
- Full 10% paper sweep is not started yet; it likely exceeds the 5-minute guidance and needs explicit go-ahead.

