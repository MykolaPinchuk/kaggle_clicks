# Agent Log — 2025-12-25T19-08Z (Codex / GPT-5.2)

## Goal
Add paired statistical inference for the 10% **no-TE** paper grid across all 40 runs (20 specs × Fold A/B), so no-TE results can be included in main results alongside TE.

## What ran
1) Full no-TE grid rerun on the same 10% sample, this time exporting predictions:
- Command:
  - `python -m kaggle_clicks.run_sweep_family_a_full_grid --sample-parquet data/interim/train_sample_10pct.parquet --sample-pct 10 --sweep-tag paper_full_grid_10pct_noTE_with_preds --rolling-tail --no-te --export-preds --max-parallel-runs 2 --ram-budget-gib 25 --mem-safety-margin-gib 8 --n-jobs 1 --max-wall-seconds 14400 --per-run-timeout-seconds 14400`
- Output sweep dir:
  - `runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct`

2) Paired inference vs baseline (ROC-AUC DeLong; PR-AUC hour-block bootstrap):
- Command:
  - `python -m kaggle_clicks.postprocess_sweep_inference --sweep-dir runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct --baseline-run-id A3_trailing --split test --bootstrap-reps 200 --seed 42`
- Output:
  - `runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct/inference_vs_baseline.csv`

3) Within-length-set shape-vs-trailing ROC contrasts (paired DeLong):
- Command:
  - `python -m kaggle_clicks.postprocess_paper_grid_contrasts --sweep-dir runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct --split test --bootstrap-reps 0 --seed 42`
- Outputs:
  - `runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct/contrasts_vs_trailing_test.md`
  - `runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct/contrasts_vs_trailing_test.csv`

4) Master table generation (mean/std across folds + per-fold deltas):
- Added script: `kaggle_clicks/postprocess_paper_grid_master.py`
- Generated into the sweep dir:
  - `runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct/master_results.md`
  - `runs/sweeps/20251225_161654_paper_full_grid_10pct_noTE_with_preds_s10pct/master_results.csv`

## Published paper artifacts (v1)
Updated `paper_draft/v1/10pct_paper_grid_noTE/` to include inference and contrasts:
- `paper_draft/v1/10pct_paper_grid_noTE/inference_vs_baseline.csv`
- `paper_draft/v1/10pct_paper_grid_noTE/contrasts_vs_trailing_test.md`
- `paper_draft/v1/10pct_paper_grid_noTE/contrasts_vs_trailing_test.csv`
- Refreshed `paper_draft/v1/10pct_paper_grid_noTE/{summary.*,master_results.*}`
- Updated manifests:
  - `paper_draft/v1/README.md`
  - `paper_draft/v1/10pct_paper_grid_noTE/README.md`

## Notes
- Inference baseline for no-TE is `A3_trailing` (consistent with TE grid’s “baseline within grid” convention).
- This rerun adds `preds_val.parquet` / `preds_test.parquet` to each of the 40 `runs/<...>` run dirs referenced by the sweep summaries; total additional disk is moderate (~hundreds of MB).

