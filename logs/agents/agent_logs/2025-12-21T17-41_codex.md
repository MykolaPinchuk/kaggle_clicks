# Agent Log â€” Chrome OOM + Memory Gate Safety Margin

- Agent: Codex CLI
- Model: GPT-5.2
- Created (UTC): 2025-12-21T17:41:52+00:00

## Incident

Running the 10% full-grid sweep with `--max-parallel-runs 3` caused high RAM pressure and the OS killed Chrome.

## Immediate action

- Stopped the sweep driver and its child runs:
  - driver PID: `1139384`
  - freed memory back to ~`25GiB` available (see `free -h` output at stop time).

## Change

- `kaggle_clicks/run_sweep_family_a_full_grid.py`
  - Added `--mem-safety-margin-gib` (default `6`) to require extra MemAvailable headroom *in addition to* the `--ram-budget-gib` constraint.
  - Updated `PAUSE_MEM ...` log line to include the margin.
- `docs/AGENT_ONBOARDING.md`
  - Documented the new margin flag.

## Smoke validation

- Confirmed the gate can pause launches when the computed threshold exceeds MemAvailable:
  - `runs/sweeps/20251221_174129_memgate_smoke3_s1pct/sweep.log`

